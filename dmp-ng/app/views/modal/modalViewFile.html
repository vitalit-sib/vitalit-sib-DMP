<!--
/************************ LICENCE ***************************
*     This file is part of <DMP Canvas Generator web application>
*     Copyright (C) <2016> SIB Swiss Institute of Bioinformatics
*
*     This program is free software: you can redistribute it and/or modify
*     it under the terms of the GNU Affero General Public License as
*     published by the Free Software Foundation, either version 3 of the
*     License, or (at your option) any later version.
*
*     This program is distributed in the hope that it will be useful,
*     but WITHOUT ANY WARRANTY; without even the implied warranty of
*     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
*     GNU Affero General Public License for more details.
*
*     You should have received a copy of the GNU Affero General Public License
*    along with this program.  If not, see <http://www.gnu.org/licenses/>
*
*****************************************************************/
-->
<div class="modal-header">
	<button type="button" class="btn btn-primary btn-sm" ng-click="vm.cancel()">
		<span class="glyphicon glyphicon-ban-circle"></span> close
	</button>
</div>

<div class="modal-body " >
	<div ng-if= "vm.tablecsv.type == 'xls' " >

		<div class = 'panel panel-default' style= "overflow: auto;">
			<div class = 'panel-body'>
				<legend style="border: none">{{vm.tablecsv.name}}</legend>
				<ul class="nav nav-tabs" ng-if= "vm.tablecsv.type == 'xls'  && vm.tablecsv.tables.length > 1">
					<li role="presentation" ng-class="(vm.sheet == $index)? 'active': ''"  ng-repeat="title in vm.tablecsv.titles" >

						<a  ng-click="vm.indexfct($index)" href="" >{{title}} </a>
					</li>
				</ul>
				<style ng-bind-html="vm.tablecsv.style"></style>
				<div ng-bind-html="vm.trustAsHtml(vm.myHtmlVar)" ></div>
			</div>
		</div>

	</div>

	<div class='container' ng-if= " vm.tablecsv.type == 'img' " >
		<div class = 'panel panel-default'>
			<div class = 'panel-body'>
				<fieldset>
					<legend style="border: none">{{vm.tablecsv.name}}</legend>
					<p><img class="img-responsive center-block"  ng-if= "vm.tablecsv.type == 'img' " ng-src="{{vm.url}}image_get.php?file_id={{vm.file_id}}&usercode={{vm.usercode}}"  style="max-width:500px;" ></p>
				</fieldset>
			</div>
		</div>
	</div>
	<div  ng-if= 'vm.tablecsv.type == "txt" '>
		<div class = 'panel panel-default'>
			<div class = 'panel-body'>
				<fieldset>
					<legend style="border: none">{{vm.tablecsv.name}}</legend>
					<dl class = 'dl-horizontal'>
						<pre>{{vm.tablecsv.content}}</pre>
					</dl>
				</fieldset>
			</div>
		</div>
	</div>
	<div  ng-if= 'vm.tablecsv.type == "md" '>
		<div class = 'panel panel-default'>
			<div class = 'panel-body'>
				<style ng-bind-html="vm.tablecsv.style"></style>
				<div ng-bind-html="vm.trustAsHtml(vm.myHtmlVar)" ></div>
			</div>
		</div>
	</div>
	<div  ng-if= 'vm.tablecsv.type == "viewer" '>
		<div class = 'panel panel-default'>
					<div class = 'panel-body'>
						<fieldset>
							<legend style="border: none">{{vm.tablecsv.name}}</legend>
							<p style="text-align:center;"><iframe src = "{{vm.trustAsUrl}}" width='700' height='500' allowfullscreen webkitallowfullscreen style="text-align:center;"></iframe></p>
						</fieldset>
					</div>
				</div>
	</div>
	<div ng-if= "vm.tablecsv.type == 'csv' " >
		<div class = 'panel panel-default' style= "overflow: auto;">
			<div class = 'panel-body'>
				<legend style="border: none">{{vm.tablecsv.name}}</legend>

				<div class="well well-sm" ng-if= "vm.tablecsv.comment.length > 0">
					<p ng-repeat="comments in vm.tablecsv.comment track by $index">{{comments}}</p>
				</div>

				<table  st-table="vm.tablecsv" class="table table-bordered">
					<thead>
						<tr ng-repeat="headers in vm.tablecsv.header track by $index">
							<th ng-repeat="header in headers track by $index">{{header}}</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="cells in vm.tablecsv.row track by $index" >
							<td ng-repeat="cell in cells track by $index">{{cell}} </td>
						</tr>
					</tbody>


				</table>

			</div>
		</div>
	</div>

</div>